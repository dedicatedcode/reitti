<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="#{settings.title}">Settings - Reitti</title>
    <link rel="icon" th:href="@{/img/logo.svg}">
    <link rel="apple-touch-icon" th:href="@{/img/logo.svg}">
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/img/logo.svg}">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/lineicons.css">
    <link rel="stylesheet" href="/css/acknowledgments.css">
    <script src="/js/htmx.min.js"></script>
    <script src="/js/util.js"></script>
</head>
<body class="settings-page">
<div class="settings-container">
    <div th:replace="~{fragments/settings-navigation :: settings-nav(${activeSection}, ${dataManagementEnabled}, ${isAdmin})}"></div>
    <div class="settings-content-area">
        <div id="about-section" class="settings-section active">
            <h2 th:text="#{about.title}">About Application</h2>
            <div class="settings-card">
                <p>
                    <strong th:text="#{about.app.version}">Application Version:</strong>
                    <span th:text="${buildVersion}">N/A</span>
                </p>
                <p>
                    <strong th:text="#{about.git.commit.details}">Commit Details:</strong>
                    <span th:text="${gitCommitDetails}">N/A</span>
                </p>
                <p>
                    <strong th:text="#{about.build.time}">Build Time:</strong>
                    <span th:text="${buildTime}">N/A</span>
                </p>
            </div>

            <!-- Acknowledgments Section -->
            <div class="acknowledgments-section">
                <h3 class="acknowledgments-title">
                    <i class="lni lni-heart-filled"></i>
                    <span th:text="#{about.acknowledgments.title}">Acknowledgments</span>
                </h3>
                <p class="acknowledgments-subtitle" th:text="#{about.acknowledgments.subtitle}">
                    Reitti wouldn't be possible without the amazing contributions from our community and the incredible open-source projects we build upon.
                </p>

                <!-- Contributors Section -->
                <div class="contributors-section" th:if="${!contributors.isEmpty()}">
                    <h4 class="section-title">
                        <i class="lni lni-users"></i>
                        <span th:text="#{about.contributors.title}">Contributors</span>
                    </h4>
                    <div class="contributors-grid">
                        <div class="contributor-card" th:each="contributor : ${contributors}">
                            <div class="contributor-avatar">
                                <img th:src="${contributor.avatar}" th:alt="${contributor.name}" />
                                <div class="contributor-badge">
                                    <i class="lni lni-github-original"></i>
                                </div>
                            </div>
                            <div class="contributor-info">
                                <h5 class="contributor-name" th:text="${contributor.name}">Name</h5>
                                <a th:href="'https://github.com/' + ${contributor.github}" class="contributor-link" target="_blank">
                                    <i class="lni lni-github-original"></i>
                                    <span th:text="${contributor.github}">GitHub</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Translators Section -->
                <div class="translators-section" th:if="${!translators.isEmpty()}">
                    <h4 class="section-title">
                        <i class="lni lni-world"></i>
                        <span th:text="#{about.translators.title}">Translators</span>
                    </h4>
                    <div class="translators-grid">
                        <div class="translator-card" th:each="translator : ${translators}">
                            <div class="translator-avatar">
                                <img th:src="${translator.avatar}" th:alt="${translator.name}" />
                                <div class="completion-badge" th:classappend="${translator.completionPercentage == 100} ? 'complete' : 'incomplete'">
                                    <span th:text="${translator.completionPercentage} + '%'">100%</span>
                                </div>
                            </div>
                            <div class="translator-info">
                                <h5 class="translator-name" th:text="${translator.name}">Name</h5>
                                <div class="translator-languages">
                                    <span class="language-tag" th:each="language : ${translator.languages}" th:text="${language}">Language</span>
                                </div>
                                <div class="completion-bar">
                                    <div class="completion-fill" th:style="'width: ' + ${translator.completionPercentage} + '%'"></div>
                                </div>
                                <a th:href="'https://weblate.org/user/' + ${translator.weblate}" class="translator-link" target="_blank">
                                    <i class="lni lni-world"></i>
                                    <span>Weblate Profile</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Open Source Projects Section -->
                <div class="projects-section" th:if="${!projects.isEmpty()}">
                    <h4 class="section-title">
                        <i class="lni lni-code"></i>
                        <span th:text="#{about.projects.title}">Open Source Projects</span>
                    </h4>
                    <div class="projects-grid">
                        <div class="project-card" th:each="project : ${projects}">
                            <div class="project-header">
                                <div class="project-category" th:text="${project.category}">Category</div>
                                <div class="project-license" th:text="${project.license}">License</div>
                            </div>
                            <div class="project-content">
                                <h5 class="project-name" th:text="${project.name}">Project Name</h5>
                                <p class="project-description" th:text="${project.description}">Description</p>
                                <a th:href="${project.url}" class="project-link" target="_blank">
                                    <i class="lni lni-link"></i>
                                    <span th:text="#{about.projects.visit}">Visit Project</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Thank You Message -->
                <div class="thank-you-message" onclick="createFireworks()">
                    <div class="thank-you-content">
                        <i class="lni lni-heart thank-you-icon"></i>
                        <h4 th:text="#{about.thankyou.title}">Thank You!</h4>
                        <p th:text="#{about.thankyou.message}">
                            Every contribution, no matter how small, helps make Reitti better for everyone. 
                            We're grateful for your support and dedication to the open-source community.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:inline="javascript">
    window.userSettings = /*[[${userSettings}]]*/ {}
    
    function createFireworks() {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7', '#a29bfe'];
        
        // Create multiple fireworks
        for (let i = 0; i < 8; i++) {
            setTimeout(() => {
                createSingleFirework(colors[Math.floor(Math.random() * colors.length)]);
            }, i * 200);
        }
        
        // Create expanding fireworks after initial burst
        setTimeout(() => {
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    createSingleFirework(colors[Math.floor(Math.random() * colors.length)]);
                }, i * 100);
            }
        }, 2000);
    }
    
    function createSingleFirework(color) {
        const firework = document.createElement('div');
        firework.className = 'firework';
        
        // Random position for explosion with more spread
        const x = Math.random() * (window.innerWidth * 1.2) - (window.innerWidth * 0.1);
        const y = Math.random() * (window.innerHeight * 0.5) + (window.innerHeight * 0.1);
        
        firework.style.left = x + 'px';
        firework.style.top = y + 'px';
        
        // Create arced rocket trail
        const trailDuration = 1.0 + Math.random() * 0.6; // 1.0-1.6s
        const arcOffset = (Math.random() - 0.5) * 40; // Small arc -20px to +20px
        
        const trail = document.createElement('div');
        trail.className = 'firework-trail';
        trail.style.setProperty('--trail-duration', trailDuration + 's');
        trail.style.setProperty('--arc-offset', arcOffset + 'px');
        trail.style.left = (x - 1.5) + 'px';
        trail.style.bottom = '0px';
        trail.style.height = (window.innerHeight - y + 20) + 'px';
        document.body.appendChild(trail);
        
        // Delay explosion until trail reaches the top
        const explosionDelay = trailDuration * 700; // 70% of trail duration
        setTimeout(() => {
            createExplosion(firework, color, x, y);
            document.body.appendChild(firework);
            
            // Start fading trail immediately after explosion
            trail.style.animation = `firework-trail-fade 0.5s ease-out forwards`;
        }, explosionDelay);
        
        // Clean up
        setTimeout(() => {
            if (firework.parentNode) firework.parentNode.removeChild(firework);
            if (trail.parentNode) trail.parentNode.removeChild(trail);
        }, explosionDelay + 2000); // Reduced from 5000 to 2000
    }
    
    function createExplosion(firework, color, x, y) {
        const explosionTypes = ['circle', 'heart', 'star', 'burst', 'ring'];
        const explosionType = explosionTypes[Math.floor(Math.random() * explosionTypes.length)];
        
        let particleCount = 20;
        let particles = [];
        
        switch (explosionType) {
            case 'circle':
                particles = createCircleExplosion(particleCount);
                break;
            case 'heart':
                particles = createHeartExplosion(particleCount);
                break;
            case 'star':
                particles = createStarExplosion(particleCount);
                break;
            case 'burst':
                particles = createBurstExplosion(particleCount);
                break;
            case 'ring':
                particles = createRingExplosion(particleCount);
                break;
        }
        
        particles.forEach((pos, i) => {
            const particle = document.createElement('div');
            particle.className = 'firework-particle';
            particle.style.backgroundColor = color;
            
            const duration = 1.5 + Math.random() * 1; // 1.5-2.5s
            const easing = Math.random() > 0.5 ? 'ease-out' : 'cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            
            particle.style.setProperty('--dx', pos.dx + 'px');
            particle.style.setProperty('--dy', pos.dy + 'px');
            particle.style.setProperty('--duration', duration + 's');
            particle.style.setProperty('--easing', easing);
            
            firework.appendChild(particle);
            
            // Make particles fall after explosion
            setTimeout(() => {
                particle.classList.add('falling');
            }, duration * 1000);
        });
    }
    
    function createCircleExplosion(count) {
        const particles = [];
        for (let i = 0; i < count; i++) {
            const angle = (i / count) * Math.PI * 2;
            const distance = 60 + Math.random() * 80;
            particles.push({
                dx: Math.cos(angle) * distance,
                dy: Math.sin(angle) * distance
            });
        }
        return particles;
    }
    
    function createHeartExplosion(count) {
        const particles = [];
        for (let i = 0; i < count; i++) {
            const t = (i / count) * Math.PI * 2;
            const scale = 40;
            const dx = scale * (16 * Math.pow(Math.sin(t), 3));
            const dy = -scale * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
            particles.push({ dx, dy });
        }
        return particles;
    }
    
    function createStarExplosion(count) {
        const particles = [];
        const points = 5;
        for (let i = 0; i < count; i++) {
            const angle = (i / count) * Math.PI * 2;
            const pointIndex = Math.floor((angle / (Math.PI * 2)) * points * 2);
            const distance = (pointIndex % 2 === 0) ? 80 : 40; // Alternating distances for star shape
            particles.push({
                dx: Math.cos(angle) * distance,
                dy: Math.sin(angle) * distance
            });
        }
        return particles;
    }
    
    function createBurstExplosion(count) {
        const particles = [];
        for (let i = 0; i < count; i++) {
            const angle = Math.random() * Math.PI * 2;
            const distance = 30 + Math.random() * 120;
            particles.push({
                dx: Math.cos(angle) * distance,
                dy: Math.sin(angle) * distance
            });
        }
        return particles;
    }
    
    function createRingExplosion(count) {
        const particles = [];
        for (let i = 0; i < count; i++) {
            const angle = (i / count) * Math.PI * 2;
            const distance = 70 + Math.random() * 20; // Tight ring
            particles.push({
                dx: Math.cos(angle) * distance,
                dy: Math.sin(angle) * distance
            });
        }
        return particles;
    }
</script>
</body>
