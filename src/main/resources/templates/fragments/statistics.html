<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div class="years-navigation" th:fragment="years-navigation">
    <div class="timeline-entry trip" data-year="overall"
         hx-get="/statistics/overall"
         hx-target="#statistics-panel"
         hx-trigger="click"
         hx-swap="outerHTML">
        <div class="entry-description" th:text="#{statistics.overall}">Overall</div>
    </div>
    <div class="timeline-entry trip" th:each="year : ${years}"
         th:attr="hx-get='/statistics/'+ ${year}"
         hx-target="#statistics-panel"
         hx-trigger="click"
         hx-swap="outerHTML">
        <div class="entry-description" th:text="${year}">2024</div>
    </div>
    <script>
        document.querySelector('.years-navigation').addEventListener('click', function (event) {
            const entry = event.target.closest('.timeline-entry');
            if (!entry) return;
            const isCurrentlyActive = entry.classList.contains('active');
             document.querySelectorAll('.timeline-container .timeline-entry')
                .forEach(e => e.classList.remove('active'));
            if (!isCurrentlyActive) {
                entry.classList.add('active');
            }
        });
    </script>
</div>

<div th:fragment="statistics-content" id="statistics-panel" class="statistics-content">
    <h2 th:text="${title}">Statistics</h2>
    <div class="statistics-placeholder">
        <p th:text="#{statistics.coming.soon}">Statistics features are coming soon!</p>
        <div th:if="${statisticsType == 'overall'}">
            <p>This will show overall statistics across all years.</p>
        </div>
        <div th:if="${statisticsType == 'year'}">
            <p th:text="'This will show statistics for the year ' + ${year}">This will show statistics for the specific
                year.</p>
        </div>
    </div>
</div>

</body>
