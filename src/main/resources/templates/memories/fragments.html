<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>

<!-- Block type selection fragment -->
<div th:fragment="block-type-selection" class="block-type-selection">
    <h3>Select Block Type</h3>
    <div class="block-type-grid">
        <button type="button" 
                class="block-type-option"
                th:attr="hx-get=@{/memories/{id}/blocks/new(id=${memoryId}, type='TEXT')}"
                hx-target=".block-type-grid"
                hx-swap="beforeend">
            <span>Text Block</span>
            <p>Add text content with headlines and paragraphs</p>
        </button>
        
        <button type="button" 
                class="block-type-option"
                th:attr="hx-get=@{/memories/{id}/blocks/new(id=${memoryId}, type='VISIT')}"
                hx-target=".block-type-grid"
                hx-swap="beforeend">
            <span>Visit Block</span>
            <p>Add a location you visited during this memory</p>
        </button>
        
        <button type="button" 
                class="block-type-option"
                th:attr="hx-get=@{/memories/{id}/blocks/new(id=${memoryId}, type='TRIP')}"
                hx-target=".block-type-grid"
                hx-swap="beforeend">
            <span>Trip Block</span>
            <p>Add a journey or route from this memory</p>
        </button>
        
        <button type="button" 
                class="block-type-option"
                th:attr="hx-get=@{/memories/{id}/blocks/new(id=${memoryId}, type='IMAGE_GALLERY')}"
                hx-target=".block-type-grid"
                hx-swap="beforeend">
            <span>Image Gallery</span>
            <p>Add a collection of photos from this memory</p>
        </button>
    </div>
    
    <div class="form-actions">
        <button type="button" 
                class="btn btn-secondary"
                hx-get="/memories/fragments/empty"
                hx-target=".blocks-add-area"
                hx-swap="innerHTML">Cancel</button>
    </div>
</div>

<!-- Empty fragment for clearing content -->
<div th:fragment="empty"></div>

<!-- Memory block fragment -->
<div th:fragment="memory-block" class="memory-block" th:attr="data-block-id=${block.id}, data-block-type=${block.blockType.name()}">
    <div class="block-header">
        <span class="block-type-badge" th:text="${block.blockType.name()}">BLOCK TYPE</span>
        <div class="block-actions">
            <button class="btn-icon" th:onclick="'editBlock(' + ${block.id} + ')'"><i class="lni lni-pencil"></i></button>
            <form th:action="@{/memories/{memoryId}/blocks/{blockId}(memoryId=${memory.id}, blockId=${block.id})}" 
                  method="post" style="display: inline;">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="btn-icon danger" onclick="return confirm('Delete this block?')">
                    <i class="lni lni-trash"></i>
                </button>
            </form>
        </div>
    </div>
    <div class="block-content">
        <div th:if="${block.blockType.name() == 'TEXT'}" class="text-block">
            <h3>Text Block</h3>
            <p>Content will be loaded here</p>
        </div>
        <div th:if="${block.blockType.name() == 'VISIT'}" class="visit-block">
            <i class="lni lni-map-marker"></i>
            <p>Visit block</p>
        </div>
        <div th:if="${block.blockType.name() == 'TRIP'}" class="trip-block">
            <i class="lni lni-direction"></i>
            <p>Trip block</p>
        </div>
        <div th:if="${block.blockType.name() == 'IMAGE_GALLERY'}" class="gallery-block">
            <i class="lni lni-gallery"></i>
            <p>Image gallery</p>
        </div>
    </div>
</div>

</body>
</html>
